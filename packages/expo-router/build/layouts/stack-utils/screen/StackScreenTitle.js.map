{"version":3,"file":"StackScreenTitle.js","sourceRoot":"","sources":["../../../../src/layouts/stack-utils/screen/StackScreenTitle.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA,4CAqBC;AAED,oFAkDC;AAvLD,+CAAuC;AACvC,+CAA0E;AAE1E,wFAAsF;AACtF,gDAA2E;AAiD3E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAwDG;AACH,SAAgB,gBAAgB,CAAC,EAC/B,QAAQ,EACR,OAAO,EACP,KAAK,EACL,UAAU,EACV,KAAK,GACiB;IACtB,MAAM,OAAO,GAAG,IAAA,eAAO,EACrB,GAAG,EAAE,CACH,oCAAoC,CAClC,EAAE;IACF,8CAA8C;IAC9C,EAAE,QAAQ,EAAE,OAAO,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAG5C,CACF,EACH,CAAC,QAAQ,EAAE,OAAO,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,CAAC,CAC9C,CAAC;IACF,IAAA,0CAAoB,EAAC,OAAO,CAAC,CAAC;IAC9B,OAAO,IAAI,CAAC;AACd,CAAC;AAED,SAAgB,oCAAoC,CAClD,OAAqC,EACrC,KAA4B;IAE5B,MAAM,cAAc,GAAG,yBAAU,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;IACvD,MAAM,mBAAmB,GAAG,yBAAU,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;IAEjE,IAAI,YAAY,GAAiC,KAAK,CAAC,OAAO;QAC5D,CAAC,CAAC,EAAE,WAAW,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,EAAE;QAC9C,CAAC,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC,QAA8B,EAAE,CAAC;IAEpD,IAAI,KAAK,CAAC,OAAO,IAAI,OAAO,KAAK,CAAC,QAAQ,KAAK,QAAQ,EAAE,CAAC;QACxD,IAAI,OAAO,EAAE,CAAC;YACZ,OAAO,CAAC,IAAI,CACV,wFAAwF,CACzF,CAAC;QACJ,CAAC;QACD,YAAY,GAAG,EAAE,CAAC;IACpB,CAAC;IACD,IAAI,CAAC,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,QAAQ,IAAI,IAAI,IAAI,OAAO,KAAK,CAAC,QAAQ,KAAK,QAAQ,EAAE,CAAC;QACnF,IAAI,OAAO,EAAE,CAAC;YACZ,OAAO,CAAC,IAAI,CACV,kKAAkK,CACnK,CAAC;QACJ,CAAC;QACD,YAAY,GAAG,EAAE,CAAC;IACpB,CAAC;IAED,OAAO;QACL,GAAG,OAAO;QACV,GAAG,YAAY;QACf,gBAAgB,EAAE,KAAK,CAAC,KAAK;QAC7B,gBAAgB,EAAE,cAAc,EAAE,SAAS;QAC3C,gBAAgB,EAAE;YAChB,GAAG,cAAc;YACjB,GAAG,CAAC,cAAc,EAAE,UAAU;gBAC5B,CAAC,CAAC;oBACE,UAAU,EAAE,IAAA,2CAAmC,EAAC,cAAc,EAAE,UAAU,CAAC;iBAC5E;gBACH,CAAC,CAAC,EAAE,CAAC;SACR;QACD,qBAAqB,EAAE;YACrB,GAAG,mBAAmB;YACtB,GAAG,CAAC,mBAAmB,EAAE,UAAU;gBACjC,CAAC,CAAC;oBACE,UAAU,EAAE,IAAA,2CAAmC,EAAC,mBAAmB,EAAE,UAAU,CAAC;iBACjF;gBACH,CAAC,CAAC,EAAE,CAAC;SACR;KACF,CAAC;AACJ,CAAC","sourcesContent":["import { NativeStackNavigationOptions } from '@react-navigation/native-stack';\nimport React, { useMemo } from 'react';\nimport { StyleSheet, type StyleProp, type TextStyle } from 'react-native';\n\nimport { useCompositionOption } from '../../../fork/native-stack/composition-options';\nimport { convertFontWeightToStringFontWeight } from '../../../utils/style';\n\nexport type StackScreenTitleProps = {\n  /**\n   * The title content. Pass a string for a plain text title,\n   * or a custom component when `asChild` is enabled.\n   */\n  children?: React.ReactNode;\n  /**\n   * Use this to render a custom component as the header title.\n   *\n   * @example\n   * ```tsx\n   * <Stack.Screen.Title asChild>\n   *   <MyCustomTitle />\n   * </Stack.Screen.Title>\n   * ```\n   */\n  asChild?: boolean;\n  style?: StyleProp<{\n    fontFamily?: TextStyle['fontFamily'];\n    fontSize?: TextStyle['fontSize'];\n    fontWeight?: Exclude<TextStyle['fontWeight'], number>;\n    // TODO(@ubax): This should be ColorValue, but react-navigation types\n    // currently only accept string for color props. In RN v8 we can change this to ColorValue.\n    color?: string;\n    textAlign?: 'left' | 'center';\n  }>;\n  /**\n   * Style properties for the large title header.\n   *\n   * @platform ios\n   */\n  largeStyle?: StyleProp<{\n    fontFamily?: TextStyle['fontFamily'];\n    fontSize?: TextStyle['fontSize'];\n    fontWeight?: Exclude<TextStyle['fontWeight'], number>;\n    // TODO(@ubax): This should be ColorValue, but react-navigation types\n    // currently only accept string for color props. In RN v8 we can change this to ColorValue.\n    color?: string;\n  }>;\n  /**\n   * Enables large title mode.\n   *\n   * @platform ios\n   */\n  large?: boolean;\n};\n\n/**\n * Component to set the screen title.\n *\n * Can be used inside Stack.Screen in a layout or directly inside a screen component.\n *\n * @example\n * String title in a layout:\n * ```tsx\n * import { Stack } from 'expo-router';\n *\n * export default function Layout() {\n *   return (\n *     <Stack>\n *       <Stack.Screen name=\"index\">\n *         <Stack.Screen.Title large>Home</Stack.Screen.Title>\n *       </Stack.Screen>\n *     </Stack>\n *   );\n * }\n * ```\n *\n * @example\n * String title inside a screen:\n * ```tsx\n * import { Stack } from 'expo-router';\n *\n * export default function Page() {\n *   return (\n *     <>\n *       <Stack.Screen.Title>My Page</Stack.Screen.Title>\n *       <ScreenContent />\n *     </>\n *   );\n * }\n * ```\n *\n * @example\n * Custom component as the title using `asChild`:\n * ```tsx\n * import { Stack } from 'expo-router';\n *\n * export default function Layout() {\n *   return (\n *     <Stack>\n *       <Stack.Screen name=\"index\">\n *         <Stack.Screen.Title asChild>\n *           <MyCustomTitle />\n *         </Stack.Screen.Title>\n *       </Stack.Screen>\n *     </Stack>\n *   );\n * }\n * ```\n *\n * > **Note:** If multiple instances of this component are rendered for the same screen,\n * the last one rendered in the component tree takes precedence.\n */\nexport function StackScreenTitle({\n  children,\n  asChild,\n  style,\n  largeStyle,\n  large,\n}: StackScreenTitleProps) {\n  const options = useMemo(\n    () =>\n      appendStackScreenTitlePropsToOptions(\n        {},\n        // satisfies ensures every prop is listed here\n        { children, asChild, style, largeStyle, large } satisfies Record<\n          keyof StackScreenTitleProps,\n          unknown\n        >\n      ),\n    [children, asChild, style, largeStyle, large]\n  );\n  useCompositionOption(options);\n  return null;\n}\n\nexport function appendStackScreenTitlePropsToOptions(\n  options: NativeStackNavigationOptions,\n  props: StackScreenTitleProps\n): NativeStackNavigationOptions {\n  const flattenedStyle = StyleSheet.flatten(props.style);\n  const flattenedLargeStyle = StyleSheet.flatten(props.largeStyle);\n\n  let titleOptions: NativeStackNavigationOptions = props.asChild\n    ? { headerTitle: () => <>{props.children}</> }\n    : { title: props.children as string | undefined };\n\n  if (props.asChild && typeof props.children === 'string') {\n    if (__DEV__) {\n      console.warn(\n        \"Stack.Screen.Title: 'asChild' expects a custom component as children, string received.\"\n      );\n    }\n    titleOptions = {};\n  }\n  if (!props.asChild && props.children != null && typeof props.children !== 'string') {\n    if (__DEV__) {\n      console.warn(\n        'Stack.Screen.Title: Component passed to Stack.Screen.Title without `asChild` enabled. In order to render a custom component as the title, set `asChild` to true.'\n      );\n    }\n    titleOptions = {};\n  }\n\n  return {\n    ...options,\n    ...titleOptions,\n    headerLargeTitle: props.large,\n    headerTitleAlign: flattenedStyle?.textAlign,\n    headerTitleStyle: {\n      ...flattenedStyle,\n      ...(flattenedStyle?.fontWeight\n        ? {\n            fontWeight: convertFontWeightToStringFontWeight(flattenedStyle?.fontWeight),\n          }\n        : {}),\n    },\n    headerLargeTitleStyle: {\n      ...flattenedLargeStyle,\n      ...(flattenedLargeStyle?.fontWeight\n        ? {\n            fontWeight: convertFontWeightToStringFontWeight(flattenedLargeStyle?.fontWeight),\n          }\n        : {}),\n    },\n  };\n}\n"]}