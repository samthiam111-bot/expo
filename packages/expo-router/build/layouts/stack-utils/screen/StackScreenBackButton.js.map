{"version":3,"file":"StackScreenBackButton.js","sourceRoot":"","sources":["../../../../src/layouts/stack-utils/screen/StackScreenBackButton.tsx"],"names":[],"mappings":";;AA2EA,sDAsBC;AAED,8FAaC;AA/GD,iCAAgC;AAIhC,wFAAsF;AAiCtF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAoCG;AACH,SAAgB,qBAAqB,CAAC,EACpC,QAAQ,EACR,KAAK,EACL,QAAQ,EACR,WAAW,EACX,MAAM,EACN,GAAG,GACwB;IAC3B,MAAM,OAAO,GAAG,IAAA,eAAO,EACrB,GAAG,EAAE,CACH,yCAAyC,CACvC,EAAE;IACF,8CAA8C;IAC9C,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,WAAW,EAAE,MAAM,EAAE,GAAG,EAGpD,CACF,EACH,CAAC,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,WAAW,EAAE,MAAM,EAAE,GAAG,CAAC,CACtD,CAAC;IACF,IAAA,0CAAoB,EAAC,OAAO,CAAC,CAAC;IAC9B,OAAO,IAAI,CAAC;AACd,CAAC;AAED,SAAgB,yCAAyC,CACvD,OAAqC,EACrC,KAAiC;IAEjC,OAAO;QACL,GAAG,OAAO;QACV,eAAe,EAAE,KAAK,CAAC,QAAQ;QAC/B,oBAAoB,EAAE,KAAK,CAAC,KAAK;QACjC,qBAAqB,EAAE,KAAK,CAAC,GAAG;QAChC,2BAA2B,EAAE,KAAK,CAAC,WAAW;QAC9C,2BAA2B,EAAE,KAAK,CAAC,QAAQ;QAC3C,iBAAiB,EAAE,CAAC,KAAK,CAAC,MAAM;KACjC,CAAC;AACJ,CAAC","sourcesContent":["import { NativeStackNavigationOptions } from '@react-navigation/native-stack';\nimport { useMemo } from 'react';\nimport type { ImageSourcePropType } from 'react-native';\nimport type { ScreenStackHeaderConfigProps } from 'react-native-screens';\n\nimport { useCompositionOption } from '../../../fork/native-stack/composition-options';\n\nexport interface StackScreenBackButtonProps {\n  /**\n   * The title to display for the back button.\n   */\n  children?: string;\n  /**\n   * Style for the back button title.\n   */\n  style?: NativeStackNavigationOptions['headerBackTitleStyle'];\n  /**\n   * Whether to show a context menu when long pressing the back button.\n   *\n   * @platform ios\n   */\n  withMenu?: boolean;\n  /**\n   * The display mode for the back button.\n   *\n   * @platform ios\n   */\n  displayMode?: ScreenStackHeaderConfigProps['backButtonDisplayMode'];\n  /**\n   * Whether to hide the back button.\n   */\n  hidden?: boolean;\n  /**\n   * Custom image source for the back button.\n   */\n  src?: ImageSourcePropType;\n}\n\n/**\n * Component to configure the back button.\n *\n * Can be used inside Stack.Screen in a layout or directly inside a screen component.\n *\n * @example\n * ```tsx\n * import { Stack } from 'expo-router';\n *\n * export default function Layout() {\n *   return (\n *     <Stack>\n *       <Stack.Screen name=\"detail\">\n *         <Stack.Screen.BackButton displayMode=\"minimal\">Back</Stack.Screen.BackButton>\n *       </Stack.Screen>\n *     </Stack>\n *   );\n * }\n * ```\n *\n * @example\n * ```tsx\n * import { Stack } from 'expo-router';\n *\n * export default function Page() {\n *   return (\n *     <>\n *       <Stack.Screen.BackButton hidden />\n *       <ScreenContent />\n *     </>\n *   );\n * }\n * ```\n *\n * > **Note:** If multiple instances of this component are rendered for the same screen,\n * the last one rendered in the component tree takes precedence.\n */\nexport function StackScreenBackButton({\n  children,\n  style,\n  withMenu,\n  displayMode,\n  hidden,\n  src,\n}: StackScreenBackButtonProps) {\n  const options = useMemo(\n    () =>\n      appendStackScreenBackButtonPropsToOptions(\n        {},\n        // satisfies ensures every prop is listed here\n        { children, style, withMenu, displayMode, hidden, src } satisfies Record<\n          keyof StackScreenBackButtonProps,\n          unknown\n        >\n      ),\n    [children, style, withMenu, displayMode, hidden, src]\n  );\n  useCompositionOption(options);\n  return null;\n}\n\nexport function appendStackScreenBackButtonPropsToOptions(\n  options: NativeStackNavigationOptions,\n  props: StackScreenBackButtonProps\n): NativeStackNavigationOptions {\n  return {\n    ...options,\n    headerBackTitle: props.children,\n    headerBackTitleStyle: props.style,\n    headerBackImageSource: props.src,\n    headerBackButtonDisplayMode: props.displayMode,\n    headerBackButtonMenuEnabled: props.withMenu,\n    headerBackVisible: !props.hidden,\n  };\n}\n"]}