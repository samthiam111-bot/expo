{"version":3,"file":"transform.js","names":["_core","data","require","toCommonJS","filename","code","result","transformSync","babelrc","plugins","importInterop","loose"],"sources":["../src/transform.ts"],"sourcesContent":["import { transformSync } from '@babel/core';\n\nexport function toCommonJS(filename: string, code: string) {\n  const result = transformSync(code, {\n    filename,\n    babelrc: false,\n    plugins: [\n      [\n        require('@babel/plugin-transform-modules-commonjs'),\n        {\n          // NOTE(@kitten): We used to use sucrase to transform, which is why\n          // we're doing this CJS-to-ESM transform in the first place. Our\n          // previous transformation isn't 100% compatible with the standard\n          // Node ESM loading. In Babel, this is the \"node\" flag (although\n          // node behaviour is explicitly different from this). This skips\n          // the `__esModule -> default` wrapper\n          importInterop: 'node',\n          loose: true,\n        },\n      ],\n    ],\n  });\n  return result?.code ?? code;\n}\n"],"mappings":";;;;;;AAAA,SAAAA,MAAA;EAAA,MAAAC,IAAA,GAAAC,OAAA;EAAAF,KAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAEO,SAASE,UAAUA,CAACC,QAAgB,EAAEC,IAAY,EAAE;EACzD,MAAMC,MAAM,GAAG,IAAAC,qBAAa,EAACF,IAAI,EAAE;IACjCD,QAAQ;IACRI,OAAO,EAAE,KAAK;IACdC,OAAO,EAAE,CACP,CACEP,OAAO,CAAC,0CAA0C,CAAC,EACnD;MACE;MACA;MACA;MACA;MACA;MACA;MACAQ,aAAa,EAAE,MAAM;MACrBC,KAAK,EAAE;IACT,CAAC,CACF;EAEL,CAAC,CAAC;EACF,OAAOL,MAAM,EAAED,IAAI,IAAIA,IAAI;AAC7B","ignoreList":[]}