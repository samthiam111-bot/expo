{"version":3,"file":"SQLiteDevToolsClient.js","sourceRoot":"","sources":["../src/SQLiteDevToolsClient.ts"],"names":[],"mappings":"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","sourcesContent":["import AwaitLock from 'await-lock';\nimport type { DevToolsPluginClient } from 'expo/devtools';\nimport { startCliListenerAsync } from 'expo/devtools';\n\nimport type { SQLiteDatabase } from './SQLiteDatabase';\nimport { basename } from './pathUtils';\n\nconst DEVTOOLS_PLUGIN_NAME = 'expo-sqlite';\nconst LIST_TABLES_QUERY =\n  \"SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%' ORDER BY name\";\n\ntype SQLiteResponse =\n  | { requestId: string; method: 'listDatabases'; databases: DatabaseInfo[] }\n  | { method: 'getDatabase'; database: DatabaseInfo; data: Uint8Array }\n  | { requestId: string; method: 'executeQuery'; result: QueryResult }\n  | { requestId: string; method: 'listTables'; tables: string[] }\n  | { requestId: string; method: 'getTableSchema'; schema: ColumnInfo[] }\n  | { requestId: string; method: 'error'; error: string; originalMethod?: string };\n\ninterface DatabaseInfo {\n  name: string;\n  path: string;\n}\n\ninterface ColumnInfo {\n  cid: number;\n  name: string;\n  type: string;\n  notnull: number;\n  dflt_value: any;\n  pk: number;\n}\n\ninterface QueryResult {\n  rows: any[];\n  columns: string[];\n  changes?: number;\n  lastInsertRowId?: number;\n}\n\nlet client: DevToolsPluginClient | null = null;\nconst lock = new AwaitLock();\nconst registeredDatabases = new Map<string, WeakRef<SQLiteDatabase>>();\n\nexport async function registerDatabaseForDevToolsAsync(database: SQLiteDatabase): Promise<void> {\n  if (!__DEV__) {\n    return;\n  }\n  await maybeInitClientAsync();\n  registeredDatabases.set(database.databasePath, new WeakRef(database));\n}\n\nexport async function unregisterDatabaseForDevToolsAsync(database: SQLiteDatabase): Promise<void> {\n  if (!__DEV__) {\n    return;\n  }\n  registeredDatabases.delete(database.databasePath);\n}\n\nasync function maybeInitClientAsync(): Promise<void> {\n  if (!__DEV__ || client != null) {\n    return;\n  }\n\n  await lock.acquireAsync();\n  try {\n    const { getDevToolsPluginClientAsync } =\n      require('expo/devtools') as typeof import('expo/devtools');\n    client = await getDevToolsPluginClientAsync(DEVTOOLS_PLUGIN_NAME, {\n      websocketBinaryType: 'arraybuffer',\n    });\n    setupDevToolsListeners();\n  } catch (error: unknown) {\n    console.warn('Failed to initialize devtools client', error);\n  } finally {\n    lock.release();\n  }\n}\n\n/**\n * Close the devtools client.\n * Exposed for testing purposes.\n */\nexport async function closeDevToolsClientAsync(): Promise<void> {\n  await client?.closeAsync();\n  client = null;\n  registeredDatabases.clear();\n}\n\nfunction setupDevToolsListeners(): void {\n  client?.addMessageListener('listDatabases', async (params: { requestId: string }) => {\n    try {\n      const databases = Array.from(registeredDatabases.keys()).map((databasePath) => ({\n        name: basename(databasePath),\n        path: databasePath,\n      }));\n      client?.sendMessage('response', {\n        requestId: params.requestId,\n        method: 'listDatabases',\n        databases,\n      } as SQLiteResponse);\n    } catch (error: unknown) {\n      client?.sendMessage('response', {\n        requestId: params.requestId,\n        method: 'error',\n        error:\n          typeof error === 'object' && error !== null && 'message' in error\n            ? error.message\n            : String(error),\n        originalMethod: 'listDatabases',\n      } as SQLiteResponse);\n    }\n  });\n\n  // getDatabase uses method:requestId channel to support binary data\n  client?.addMessageListener(\n    'getDatabase',\n    async (params: { requestId: string; database: string }) => {\n      const eventName = `getDatabase:${params.requestId}`;\n      try {\n        const databasePath = Array.from(registeredDatabases.keys()).find(\n          (path) => basename(path) === params.database\n        );\n        const database = databasePath ? registeredDatabases.get(databasePath)?.deref() : undefined;\n\n        if (!database || !databasePath) {\n          throw new Error('Database not found');\n        }\n\n        const serialized = await database.serializeAsync();\n        client?.sendMessage(eventName, serialized);\n      } catch (error: unknown) {\n        client?.sendMessage(eventName, {\n          method: 'error',\n          error:\n            typeof error === 'object' && error !== null && 'message' in error\n              ? error.message\n              : String(error),\n          originalMethod: 'getDatabase',\n        } as SQLiteResponse);\n      }\n    }\n  );\n\n  client?.addMessageListener(\n    'executeQuery',\n    async (params: { requestId: string; databasePath: string; query: string; params?: any[] }) => {\n      try {\n        const database = registeredDatabases.get(params.databasePath)?.deref();\n        if (!database) {\n          client?.sendMessage('response', {\n            requestId: params.requestId,\n            method: 'error',\n            error: 'Database not found',\n            originalMethod: 'executeQuery',\n          } as SQLiteResponse);\n          return;\n        }\n\n        const result = await executeQueryAsync(params.query, database);\n\n        client?.sendMessage('response', {\n          requestId: params.requestId,\n          method: 'executeQuery',\n          result,\n        } as SQLiteResponse);\n      } catch (error: unknown) {\n        client?.sendMessage('response', {\n          requestId: params.requestId,\n          method: 'error',\n          error:\n            typeof error === 'object' && error !== null && 'message' in error\n              ? error.message\n              : String(error),\n          originalMethod: 'executeQuery',\n        } as SQLiteResponse);\n      }\n    }\n  );\n\n  client?.addMessageListener(\n    'listTables',\n    async (params: { requestId: string; databasePath: string }) => {\n      try {\n        const database = registeredDatabases.get(params.databasePath)?.deref();\n        if (!database) {\n          client?.sendMessage('response', {\n            requestId: params.requestId,\n            method: 'error',\n            error: 'Database not found',\n            originalMethod: 'listTables',\n          } as SQLiteResponse);\n          return;\n        }\n\n        const tables = await getTablesAsync(database);\n        client?.sendMessage('response', {\n          requestId: params.requestId,\n          method: 'listTables',\n          tables: tables.map((t) => t.name),\n        } as SQLiteResponse);\n      } catch (error: unknown) {\n        client?.sendMessage('response', {\n          requestId: params.requestId,\n          method: 'error',\n          error:\n            typeof error === 'object' && error !== null && 'message' in error\n              ? error.message\n              : String(error),\n          originalMethod: 'listTables',\n        } as SQLiteResponse);\n      }\n    }\n  );\n\n  client?.addMessageListener(\n    'getTableSchema',\n    async (params: { requestId: string; databasePath: string; tableName: string }) => {\n      try {\n        const database = registeredDatabases.get(params.databasePath)?.deref();\n        if (!database) {\n          client?.sendMessage('response', {\n            requestId: params.requestId,\n            method: 'error',\n            error: 'Database not found',\n            originalMethod: 'getTableSchema',\n          } as SQLiteResponse);\n          return;\n        }\n\n        const schema = await fetchTableSchemaAsync(params.tableName, database);\n\n        client?.sendMessage('response', {\n          requestId: params.requestId,\n          method: 'getTableSchema',\n          schema,\n        } as SQLiteResponse);\n      } catch (error: unknown) {\n        client?.sendMessage('response', {\n          requestId: params.requestId,\n          method: 'error',\n          error:\n            typeof error === 'object' && error !== null && 'message' in error\n              ? error.message\n              : String(error),\n          originalMethod: 'getTableSchema',\n        } as SQLiteResponse);\n      }\n    }\n  );\n}\n\n/* Setup listeners for the cli extensions client. */\nconst EXTENSION_NAME = 'expo-sqlite-cli-extension';\n\nstartCliListenerAsync(EXTENSION_NAME).then(({ addMessageListener }) => {\n  addMessageListener<Record<string, never>>('listDatabases', async ({ sendResponseAsync }) => {\n    try {\n      if (registeredDatabases.size === 0) {\n        return sendResponseAsync('No databases registered.');\n      }\n      await sendResponseAsync(\n        'Databases: ' +\n          Array.from(registeredDatabases.keys())\n            .map((databasePath) => basename(databasePath))\n            .join(', ')\n      );\n    } catch (error: unknown) {\n      await sendResponseAsync(\n        'An error occurred while listing databases: ' +\n          (typeof error === 'object' && error !== null && 'message' in error\n            ? (String(error.message) ?? 'Unknown error')\n            : String(error))\n      );\n    }\n  });\n\n  addMessageListener<{ name: string; query: string }>(\n    'executeQuery',\n    async ({ sendResponseAsync, params }) => {\n      try {\n        const database = findDatabase(params.name);\n        if (!database) {\n          return sendResponseAsync(`Database ${params.name} not found`);\n        }\n        const result = await executeQueryAsync(params.query, database);\n        await sendResponseAsync(`\\n\\n${tableFormatHelper(result)}`);\n      } catch (error: unknown) {\n        await sendResponseAsync(\n          'An error occurred while executing the query: ' +\n            (typeof error === 'object' && error !== null && 'message' in error\n              ? error.message\n              : String(error))\n        );\n      }\n    }\n  );\n  addMessageListener<{ name: string }>('listTables', async ({ sendResponseAsync, params }) => {\n    try {\n      const database = findDatabase(params.name);\n      if (!database) {\n        return sendResponseAsync(`Database ${params.name} not found`);\n      }\n\n      const tables = await getTablesAsync(database);\n      await sendResponseAsync(\n        `Tables in ${basename(database.databasePath)}: ` + tables.map((t) => t.name).join(', ')\n      );\n    } catch (error: unknown) {\n      await sendResponseAsync(\n        'An error occurred while listing tables: ' +\n          (typeof error === 'object' && error !== null && 'message' in error\n            ? error.message\n            : String(error))\n      );\n    }\n  });\n  addMessageListener<{ name: string; table: string }>(\n    'getTableSchema',\n    async ({ sendResponseAsync, params }) => {\n      try {\n        const database = findDatabase(params.name);\n        if (!database) {\n          return sendResponseAsync(`Database ${params.name} not found`);\n        }\n        const schema = await fetchTableSchemaAsync(params.table, database);\n        await sendResponseAsync(`\\n\\n${schemaFormatHelper(schema)}`);\n      } catch (error: unknown) {\n        await sendResponseAsync(\n          'An error occurred while retrieving the table schema: ' +\n            (typeof error === 'object' && error !== null && 'message' in error\n              ? error.message\n              : String(error))\n        );\n      }\n    }\n  );\n});\n\nasync function getTablesAsync(database: SQLiteDatabase) {\n  return (await database.getAllAsync(LIST_TABLES_QUERY)) as { name: string }[];\n}\n\nasync function fetchTableSchemaAsync(table: string, database: SQLiteDatabase) {\n  const tables = (await database.getAllAsync(\n    \"SELECT name FROM sqlite_master WHERE type='table' AND name = ?\",\n    [table]\n  )) as { name: string }[];\n\n  if (tables.length === 0) {\n    throw new Error(`Table '${table}' not found`);\n  }\n\n  const schema = (await database.getAllAsync(`PRAGMA table_info(${table})`)) as ColumnInfo[];\n  return schema;\n}\n\nasync function executeQueryAsync(query: string, database: SQLiteDatabase) {\n  const trimmedQuery = query.trim().toUpperCase();\n  const isReadQuery = trimmedQuery.startsWith('SELECT') || trimmedQuery.startsWith('PRAGMA');\n\n  let result: QueryResult;\n\n  if (isReadQuery) {\n    const rows = await database.getAllAsync(query, []);\n    const columns =\n      rows.length > 0 && rows[0] && typeof rows[0] === 'object' ? Object.keys(rows[0]) : [];\n    result = { rows, columns };\n  } else {\n    const runResult = await database.runAsync(query, []);\n    result = {\n      rows: [],\n      columns: [],\n      changes: runResult.changes,\n      lastInsertRowId: runResult.lastInsertRowId,\n    };\n  }\n  return result;\n}\n\nfunction findDatabase(name: string): SQLiteDatabase | undefined {\n  return Array.from(registeredDatabases.values())\n    .find((ref) => {\n      const db = ref.deref();\n      return db?.databasePath.endsWith(name) || db?.databasePath.endsWith(name + '.db');\n    })\n    ?.deref();\n}\n\n/**\n * Formats the query result into a table-like string for better readability in the CLI.\n * Example output:\n * id | title | done\n * ---|-------|-----\n * 4  | Milk  | 0\n * 5  | Cake  | 0\n *\n * For a query like: SELECT id, title, done FROM todos;\n * Output: { \"rows\": [ { \"id\": 4, \"title\": \"Milk\", \"done\": 0},{\"id\": 5,\"title\": \"Cake\", \"done\": 0}],\"columns\": [\"id\",\"title\",\"done\"}\n */\nfunction tableFormatHelper(results: QueryResult): string {\n  const columnWidths = results.columns.map((col) => col.length);\n\n  results.rows.forEach((row) => {\n    results.columns.forEach((col, index) => {\n      const cellLength = String(row[col]).length;\n      if (cellLength > columnWidths[index]) {\n        columnWidths[index] = cellLength;\n      }\n    });\n  });\n\n  const header = results.columns.map((col, index) => col.padEnd(columnWidths[index])).join(' | ');\n\n  const separator = columnWidths.map((width) => '-'.repeat(width)).join('-|-');\n\n  const rows = results.rows.map((row) =>\n    results.columns.map((col, index) => String(row[col]).padEnd(columnWidths[index])).join(' | ')\n  );\n\n  return [header, separator, ...rows].join('\\n');\n}\n\n/**\n * [ {\"cid\": 0, \"name\": \"id\",\"type\": \"INTEGER\",\"notnull\": 0,\"dflt_value\": null, \"pk\": 1},{\"cid\": 1,name\": \"title\",type\": \"TEXT\",null\": 1,alue\": null, \"pk\": 0}]\n * @param schema\n * @returns\n */\nfunction schemaFormatHelper(schema: ColumnInfo[]): string {\n  const columnWidths = ['cid', 'name', 'type', 'notnull', 'dflt_value', 'pk'].map((col) =>\n    Math.max(col.length, ...schema.map((row) => String(row[col as keyof ColumnInfo]).length))\n  );\n\n  const header = ['cid', 'name', 'type', 'notnull', 'dflt_value', 'pk']\n    .map((col, index) => col.padEnd(columnWidths[index]))\n    .join(' | ');\n\n  const separator = columnWidths.map((width) => '-'.repeat(width)).join('-|-');\n\n  const rows = schema.map((row) =>\n    ['cid', 'name', 'type', 'notnull', 'dflt_value', 'pk']\n      .map((col, index) => String(row[col as keyof ColumnInfo]).padEnd(columnWidths[index]))\n      .join(' | ')\n  );\n\n  return [header, separator, ...rows].join('\\n');\n}\n"]}